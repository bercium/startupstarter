RewriteEngine on

# if a directory or a file exists, use it directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# otherwise forward it to index.php
RewriteRule . index.php 

<ifModule mod_gzip.c>
  mod_gzip_on Yes
  mod_gzip_dechunk Yes
  mod_gzip_item_include file \.(html?|txt|css|js|php|pl)$
  mod_gzip_item_include handler ^cgi-script$
  mod_gzip_item_include mime ^text/.*
  mod_gzip_item_include mime ^application/x-javascript.*
  mod_gzip_item_exclude mime ^image/.*
  mod_gzip_item_exclude rspheader ^Content-Encoding:.*gzip.*
</ifModule>

Header set Cache-Control max-age=173000
Header append Cache-Control "public"
Header set PageTimer "It took %D microseconds for Apache to serve this request."
#Header set Content-type "text/html; charset=utf-8"
#Header set Expires "acces plus 12 hours"

ExpiresActive On
ExpiresDefault "access plus 1 days"

# Set up caching on media files for 1 year (forever?)
<FilesMatch "\.(flv|ico|pdf|avi|mov|ppt|doc|mp3|wmv|wav)$">
  ExpiresDefault "access plus 1 months"
</FilesMatch>


#different file types
ExpiresByType image/gif "access plus 1 weeks"
ExpiresByType image/jpg "access plus 1 weeks"
ExpiresByType image/jpeg "access plus 1 weeks"
ExpiresByType image/png "access plus 1 weeks"

ExpiresByType image/vnd.microsoft.icon "access plus 1 months"
ExpiresByType image/x-icon "access plus 1 months"
ExpiresByType image/ico "access plus 1 months"

ExpiresByType application/javascript "now plus 1 weeks"
ExpiresByType application/x-javascript "now plus 1 weeks"
ExpiresByType text/javascript "now plus 1 weeks"
ExpiresByType text/css "now plus 1 weeks"

